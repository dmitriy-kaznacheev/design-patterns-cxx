# Visitor (Посетитель)

## Проектирование для добавления типов или операций 
Сильная сторона ООП заключается в простом добавлении новых типов, но возникают сложности при добавлении операций. \
Процедурное решение это инверсия ООП: заключается в простом добавлении операций, но добавление типов – боль. \
Все зависит от проекта:
  - если ожидается частое добавление новых **типов** – рассматриваем операции как *закрытый набор* (**ООП решение**)
  - если ожидается частое добавление новых **операций**  – рассматриваем типы как *закрытый набор* (**процедурное решение**)

### Процедурное решение (add\_ops.cpp)
При добавлении нового класса (например, *Triangle*), придется расширить перечисление **ShapeType**. \
Это дополнение повлияет не только на функцию **draw_shapes** (оператор *switch*), но и на все классы призводные от **Shape**. \
Данное решение **нарушает OCP в отношении добовления типов** (т.е. добавлении класса *Triangle* приводит к перекомпиляции существующих классов *Circle* и *Square*), 
но **соответсвует ему в отношении добавления операци**.

### Объектно-ориентированное решение (add\_types.cpp)
Виртуальная функция **draw** позволила избавится от **ShapeType** и отрефакторить **draw_shapes** (избавится от *switch*). \
Теперь добовление нового типа (например, *Triangle*) не приводит к изменению существующих классов и соответсвует OCP. \
Но возникают проблемы при добвлении новой операции (например, *serialize* для преобразования фигур в байты). \
Т.е. получаем **нарушение OCP в отношении добовления операций** (при добавлении новой виртуальной функции придется редактировать все классы фигур), 
но **соответсвие ему в отношении добовления типов**.



